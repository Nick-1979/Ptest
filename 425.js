(()=>{var t,e,o,n,r={69314:()=>{},18983:()=>{},19390:(t,e,o)=>{"use strict";var n=o(52107),r=o(95292),a=o(60576),l=o(38090);var i=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function s(t,e){if(t.length!==e.length)return!1;for(var o=0;o<t.length;o++)if(!((n=t[o])===(r=e[o])||i(n)&&i(r)))return!1;var n,r;return!0}var u=o(64021),d=o(51330),c=o(57928);const f=new Uint8Array(32),p=(0,u.d)("modl");function m(t,e,o){return t.registry.createType("AccountId32",(0,d.e)(p,t.consts.nominationPools.palletId.toU8a(),new Uint8Array([o]),(0,c.a)(e,{bitLength:32}),f)).toString()}const g=function(t,e){void 0===e&&(e=s);var o=null;function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(o&&o.lastThis===this&&e(n,o.lastArgs))return o.lastResult;var a=t.apply(this,n);return o={lastResult:a,lastArgs:n,lastThis:this},a}return n.clear=function(){o=null},n}((function(t,e){return{rewardId:m(t,e,1),stashId:m(t,e,0)}}));onmessage=t=>{const{address:e,endpoint:o}=t.data;(async function(t,e){var o;const i=await async function(t){const e=new a.U(t);return await l.G.create({provider:e})}(e),s=await i.query.nominationPools.lastPoolId();if(console.log(`getMyPools: Getting ${s.toNumber()} pools information.`),!s)return null;const u=[];for(let t=1;t<=s.toNumber();t++)u.push(Promise.all([i.query.nominationPools.metadata(t),i.query.nominationPools.bondedPools(t),i.query.nominationPools.rewardPools(t)]));const d=(null==(o=(await Promise.all(u)).map(((t,e)=>{if(t[1].isSome){var o,n,r,a,l;const i=t[1].unwrap();return{bondedPool:{memberCounter:String(i.memberCounter),points:String(i.points),roles:i.roles,state:i.state},metadata:null!=(o=t[0])&&o.length?null!=(n=t[0])&&n.isUtf8?null==(r=t[0])?void 0:r.toUtf8():null==(a=t[0])?void 0:a.toString():null,poolId:e+1,rewardPool:null!=(l=t[2])&&l.isSome?t[2].unwrap():null}}})))?void 0:o.filter((t=>void 0!==t))).filter((e=>{var o,n,r;return String(null==e||null==(o=e.bondedPool)?void 0:o.roles.root)===t||String(null==e||null==(n=e.bondedPool)?void 0:n.roles.stateToggler)===t||String(null==e||null==(r=e.bondedPool)?void 0:r.roles.nominator)===t})),c=i.registry.chainTokens[0],f=i.registry.chainDecimals[0],p=d.map((async t=>{var e;const o=g(i,t.poolId);if(!o)return console.log(`can not find a pool with id:${t.poolId}`),null;const[a,l,s]=await Promise.all([i.query.nominationPools.rewardPools(t.poolId),i.query.system.account(o.rewardId),i.derive.staking.account(o.stashId)]),u=a.isSome?a.unwrap():null,d=(0,n.x)(r.nw,l.data.free.sub(i.consts.balances.existentialDeposit)),p={};return u&&(p.balance=null!=u&&u.balance?String(u.balance):void 0,p.points=null!=u&&u.points?String(u.points):void 0,p.totalEarnings=null!=u&&u.totalEarnings?String(u.totalEarnings):void 0),{accounts:o,bondedPool:t.bondedPool,decimal:f,member:void 0,metadata:null!=(e=t.metadata)&&e.length?t.metadata.isUtf8?t.metadata.toUtf8():t.metadata.toString():null,myClaimable:Number("0"),poolId:t.poolId,rewardClaimable:Number(d),rewardIdBalance:l.data,rewardPool:u,stashIdAccount:s,token:c}})),m=await Promise.all(p);return JSON.stringify(m)})(e,o).then((t=>{postMessage(t)}))}}},a={};function l(t){var e=a[t];if(void 0!==e)return e.exports;var o=a[t]={id:t,loaded:!1,exports:{}};return r[t].call(o.exports,o,o.exports,l),o.loaded=!0,o.exports}l.m=r,l.x=()=>{var t=l.O(void 0,[90],(()=>l(19390)));return l.O(t)},t=[],l.O=(e,o,n,r)=>{if(!o){var a=1/0;for(d=0;d<t.length;d++){for(var[o,n,r]=t[d],i=!0,s=0;s<o.length;s++)(!1&r||a>=r)&&Object.keys(l.O).every((t=>l.O[t](o[s])))?o.splice(s--,1):(i=!1,r<a&&(a=r));if(i){t.splice(d--,1);var u=n();void 0!==u&&(e=u)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[o,n,r]},o=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,l.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if("object"==typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&"function"==typeof t.then)return t}var r=Object.create(null);l.r(r);var a={};e=e||[null,o({}),o([]),o(o)];for(var i=2&n&&t;"object"==typeof i&&!~e.indexOf(i);i=o(i))Object.getOwnPropertyNames(i).forEach((e=>a[e]=()=>t[e]));return a.default=()=>t,l.d(r,a),r},l.d=(t,e)=>{for(var o in e)l.o(e,o)&&!l.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},l.f={},l.e=t=>Promise.all(Object.keys(l.f).reduce(((e,o)=>(l.f[o](t,e),e)),[])),l.u=t=>t+".js",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),l.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),l.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;l.g.importScripts&&(t=l.g.location+"");var e=l.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var o=e.getElementsByTagName("script");o.length&&(t=o[o.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=t})(),(()=>{var t={425:1};l.f.i=(e,o)=>{t[e]||importScripts(l.p+l.u(e))};var e=("undefined"!=typeof self?self:this).webpackChunk_polkadot_extension=("undefined"!=typeof self?self:this).webpackChunk_polkadot_extension||[],o=e.push.bind(e);e.push=e=>{var[n,r,a]=e;for(var i in r)l.o(r,i)&&(l.m[i]=r[i]);for(a&&a(l);n.length;)t[n.pop()]=1;o(e)}})(),n=l.x,l.x=()=>l.e(90).then(n),l.x()})();