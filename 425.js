(()=>{var t,e,o,n,r={69314:()=>{},18983:()=>{},19390:(t,e,o)=>{"use strict";var n=o(52107),r=o(95292),a=o(60576),i=o(38090);var l=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function s(t,e){if(t.length!==e.length)return!1;for(var o=0;o<t.length;o++)if(!((n=t[o])===(r=e[o])||l(n)&&l(r)))return!1;var n,r;return!0}var u=o(64021),d=o(51330),c=o(57928);const f=new Uint8Array(32),p=(0,u.d)("modl");function v(t,e,o){return t.registry.createType("AccountId32",(0,d.e)(p,t.consts.nominationPools.palletId.toU8a(),new Uint8Array([o]),(0,c.a)(e,{bitLength:32}),f)).toString()}const m=function(t,e){void 0===e&&(e=s);var o=null;function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(o&&o.lastThis===this&&e(n,o.lastArgs))return o.lastResult;var a=t.apply(this,n);return o={lastResult:a,lastArgs:n,lastThis:this},a}return n.clear=function(){o=null},n}((function(t,e){return{rewardId:v(t,e,1),stashId:v(t,e,0)}}));onmessage=t=>{const{address:e,endpoint:o}=t.data;(async function(t,e){var o;const l=await async function(t){const e=new a.U(t);return await i.G.create({provider:e})}(e),s=await l.query.nominationPools.lastPoolId();if(console.log(`Getting ${s.toNumber()} pools information.`),!s)return null;const u=[];for(let t=1;t<=s.toNumber();t++)u.push(Promise.all([l.query.nominationPools.metadata(t),l.query.nominationPools.bondedPools(t),l.query.nominationPools.rewardPools(t)]));const d=(null===(o=(await Promise.all(u)).map(((t,e)=>{if(t[1].isSome){var o,n,r,a,i;const l=t[1].unwrap();return{bondedPool:{memberCounter:String(l.memberCounter),points:String(l.points),roles:l.roles,state:l.state},metadata:null!==(o=t[0])&&void 0!==o&&o.length?null!==(n=t[0])&&void 0!==n&&n.isUtf8?null===(r=t[0])||void 0===r?void 0:r.toUtf8():null===(a=t[0])||void 0===a?void 0:a.toString():null,poolId:e+1,rewardPool:null!==(i=t[2])&&void 0!==i&&i.isSome?t[2].unwrap():null}}})))||void 0===o?void 0:o.filter((t=>void 0!==t))).filter((e=>{var o,n,r;return String(null==e||null===(o=e.bondedPool)||void 0===o?void 0:o.roles.root)===t||String(null==e||null===(n=e.bondedPool)||void 0===n?void 0:n.roles.stateToggler)===t||String(null==e||null===(r=e.bondedPool)||void 0===r?void 0:r.roles.nominator)===t})),c=l.registry.chainTokens[0],f=l.registry.chainDecimals[0],p=d.map((async t=>{var e;const o=m(l,t.poolId);if(!o)return console.log(`can not find a pool with id:${t.poolId}`),null;const[a,i,s]=await Promise.all([l.query.nominationPools.rewardPools(t.poolId),l.query.system.account(o.rewardId),l.derive.staking.account(o.stashId)]),u=a.isSome?a.unwrap():null,d=(0,n.x)(r.nw,i.data.free.sub(l.consts.balances.existentialDeposit)),p={};return u&&(p.balance=null!=u&&u.balance?String(u.balance):void 0,p.points=null!=u&&u.points?String(u.points):void 0,p.totalEarnings=null!=u&&u.totalEarnings?String(u.totalEarnings):void 0),{accounts:o,bondedPool:t.bondedPool,decimal:f,member:void 0,metadata:null!==(e=t.metadata)&&void 0!==e&&e.length?t.metadata.isUtf8?t.metadata.toUtf8():t.metadata.toString():null,myClaimable:Number("0"),poolId:t.poolId,rewardClaimable:Number(d),rewardIdBalance:i.data,rewardPool:u,stashIdAccount:s,token:c}})),v=await Promise.all(p);return JSON.stringify(v)})(e,o).then((t=>{postMessage(t)}))}}},a={};function i(t){var e=a[t];if(void 0!==e)return e.exports;var o=a[t]={id:t,loaded:!1,exports:{}};return r[t].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=r,i.x=()=>{var t=i.O(void 0,[90],(()=>i(19390)));return i.O(t)},t=[],i.O=(e,o,n,r)=>{if(!o){var a=1/0;for(d=0;d<t.length;d++){for(var[o,n,r]=t[d],l=!0,s=0;s<o.length;s++)(!1&r||a>=r)&&Object.keys(i.O).every((t=>i.O[t](o[s])))?o.splice(s--,1):(l=!1,r<a&&(a=r));if(l){t.splice(d--,1);var u=n();void 0!==u&&(e=u)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[o,n,r]},o=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,i.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if("object"==typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&"function"==typeof t.then)return t}var r=Object.create(null);i.r(r);var a={};e=e||[null,o({}),o([]),o(o)];for(var l=2&n&&t;"object"==typeof l&&!~e.indexOf(l);l=o(l))Object.getOwnPropertyNames(l).forEach((e=>a[e]=()=>t[e]));return a.default=()=>t,i.d(r,a),r},i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce(((e,o)=>(i.f[o](t,e),e)),[])),i.u=t=>t+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var o=e.getElementsByTagName("script");o.length&&(t=o[o.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{var t={425:1};i.f.i=(e,o)=>{t[e]||importScripts(i.p+i.u(e))};var e=("undefined"!=typeof self?self:this).webpackChunk_polkadot_extension=("undefined"!=typeof self?self:this).webpackChunk_polkadot_extension||[],o=e.push.bind(e);e.push=e=>{var[n,r,a]=e;for(var l in r)i.o(r,l)&&(i.m[l]=r[l]);for(a&&a(i);n.length;)t[n.pop()]=1;o(e)}})(),n=i.x,i.x=()=>i.e(90).then(n),i.x()})();